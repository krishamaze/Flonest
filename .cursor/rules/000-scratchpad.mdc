description: SCRATCHPAD / MEMORY BUFFER. Check when user mentions decisions, consensus, pending atoms, architectural choices, TODOs, or backlog items awaiting Librarian processing.
alwaysApply: false

# PROJECT SCRATCHPAD (Pending Decisions)

This file acts as a **Short-Term Memory Buffer**.

It contains architectural decisions, stack choices, and lessons learned that have NOT yet been fully integrated into the Core Rulebook.

## INSTRUCTION FOR AI (Senior Dev)

* **Read:** Check this file for recent decisions that might override older rules.

* **Write:** If the user makes a decision (e.g., "Use Zustand"), **Append** it here immediately.

---

## ðŸ“¥ PENDING ATOMS (Decisions waiting for Librarian)

- [2025-11-20] [Architecture]: Identity Hub Split: Separated into `IdentityHubSheet` (User), `ContextSheet` (Switch), and `BusinessSetupFlow` (Setup). Setup logic banned from sheets.
- [2025-11-20] [UX/Motion]: Sheet Motion: Identity/Context sheets must use `slide-up` with `motion-duration-medium` (300ms) and `motion-ease-out`.
- [2025-11-20] [State]: Identity Provider Ownership: `IdentitySheetProvider` strictly owns all state, history logic, and transition locks. Children must be pure.
- [2025-11-20] [Pattern]: Timestamp Lock: Use `transitionUntil` timestamp ref for interaction locking, not boolean flags.
- [2025-11-20] [Pattern]: History Sync: Manual sheet close must use `history.back()` to sync with `popstate` logic.

## Related Rules
- `@00-project-context.mdc` â€” Senior Dev identity that reads/writes this buffer.
- `@99-librarian.mdc` â€” Processes pending atoms from the scratchpad into permanent rules.
